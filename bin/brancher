#!/usr/bin/env php
<?php

if (file_exists('./vendor/autoload.php')) {
    require './vendor/autoload.php';
} elseif (file_exists('../vendor/autoload.php')) {
    require '../vendor/autoload.php';
} else {
    throw new Exception('./vendor/autoload.php not found.');
}

use Symfony\Component\Console\Application;

$parameters = new \Stefanius\Brancher\Misc\Parameters();
$parameters->setWorkingDir(getcwd());

$commands = [
    new \Stefanius\Brancher\Command\CreateCommand(),
    new \Stefanius\Brancher\Command\ExistsCommand(),
    new \Stefanius\Brancher\Command\CheckoutCommand(),
    new \Stefanius\Brancher\Command\CheckCommand(),
];

$application = new Application();

foreach ($commands as $command) {
    $command->setParameters($parameters);
    $application->add($command);
}

$application->run();
